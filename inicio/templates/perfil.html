{% extends 'base.html' %}

{% block content %}
<div class="container mt-5">
  <section class="col-md-6 offset-md-3 mt-2">
      <h1 class="mb-4 text-white">Perfil de Usuario</h1>

      {% if messages %}
        {% for message in messages %}
          <div class="alert alert-{{ message.tags }}">{{ message }}</div>
        {% endfor %}
      {% endif %}

      <!-- Formulario para editar el perfil -->
      <form method="POST" class="card card-body">
        {% csrf_token %}
        <h3>Editar Perfil</h3>
        <div class="mb-3">
          <label for="username" class="form-label">Nombre de Usuario</label>
          <input type="text" id="username" name="username" class="form-control" value="{{ user.username }}" required>
        </div>
        <div class="mb-3">
          <label for="first_name" class="form-label">Nombre</label>
          <input type="text" id="first_name" name="first_name" class="form-control" value="{{ user.first_name }}">
        </div>
        <div class="mb-3">
          <label for="last_name" class="form-label">Apellido</label>
          <input type="text" id="last_name" name="last_name" class="form-control" value="{{ user.last_name }}">
        </div>
        <div class="mb-3">
          <label for="email" class="form-label">Correo Electrónico</label>
          <input type="email" id="email" name="email" class="form-control" value="{{ user.email }}">
        </div>
        <button type="submit" name="update_profile" class="btn btn-primary">Guardar Cambios</button>
      </form>

      <hr>

      <!-- Formulario para cambiar la contraseña -->
      <form method="POST" class="card card-body">
        {% csrf_token %}
        <h3>Cambiar Contraseña</h3>
        {{ password_form.as_p }}
        <button type="submit" name="change_password" class="btn btn-warning">Actualizar Contraseña</button>
      </form>

      <hr>

      <!-- Formulario para eliminar cuenta -->
      <form method="POST" class="card card-body">
        {% csrf_token %}
        <h3>Eliminar Cuenta</h3>
        <p class="text-danger">Esta acción no se puede deshacer. Todos tus datos serán eliminados.</p>
        <button type="submit" name="delete_account" class="btn btn-danger">Eliminar Cuenta</button>
      </form>
    </section>
</div>

{% endblock %}
